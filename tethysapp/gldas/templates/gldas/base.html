{% extends "tethys_apps/app_base.html" %}

{% load tethys_gizmos staticfiles %}
{% load tethys_gizmos %}
{% load staticfiles %}

{% block title %}{{ tethys_app.name }}{% endblock %}
{% block app_icon %}<img src="{% static tethys_app.icon %}">{% endblock %}
{% block app_title %}{{ tethys_app.name }}{% endblock %}


{% block app_navigation_items %}
  <li class="title">Data Controls</li>
    {% gizmo select_input variables %}
    {% gizmo select_input dates %}
    {% gizmo select_input charttype %}

  <button class="btn btn-default btn-block" role="button" id="customShpChart">Timeseries for my own Shapefile</button>
  <br>

  <div style="text-align: center; padding-bottom: 12px">
    <button class="btn btn-default" role="button" id="display">View Map Styling Controls</button>
  </div>
  <div id="displayopts" style="display: none;">
    <div id="color-scales-gizmo" style="padding-bottom: 12px">
      <div style="padding-bottom: 4px"><strong>Custom Color Scale Min/Max</strong></div>
      <div>
        Min: <input class="customs" id="cs_min" type="number" style="width: 20%;" value="0">
        Max: <input class="customs" id="cs_max" type="number" style="width: 20%;" value="100">
        Use? <input class="customs" id="use_csrange" type="checkbox">
      </div>
    </div>
{#    <div id="time-range-gizmo" style="padding-bottom: 12px">#}
{#      <div style="padding-bottom: 4px"><strong>Limit by Date Range</strong></div>#}
{#      <div>#}
{#        Start: <input class="customs" id="time_min" type="number" style="width: 20%;" value="YYYY" maxlength="4">#}
{#        End: <input class="customs" id="time_max" type="number" style="width: 20%;" value="YYYY" maxlength="4">#}
{#        Use? <input class="customs" id="use_times" type="checkbox">#}
{#      </div>#}
{#    </div>#}
    {% gizmo select_input colorscheme %}
    {% gizmo range_slider opacity %}
    {% gizmo select_input gjClr %}
    {% gizmo range_slider gjOp %}
    {% gizmo range_slider gjWt %}
    {% gizmo select_input gjFlClr %}
    {% gizmo range_slider gjFlOp %}
  </div>
{% endblock %}

{% block content_dependent_styles %}
  {{ block.super }}
  <!-- styling for leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"/>
  <!-- styling for timeseries controls -->
  <link rel="stylesheet"
        href="https://cdn.rawgit.com/socib/Leaflet.TimeDimension/master/dist/leaflet.timedimension.control.min.css"/>
  <!-- styling for the leaflet draw plugin -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw-src.css"/>

  <!-- styling generated for the app -->
  <link href="{% static 'gldas/css/main.css' %}" rel="stylesheet"/>
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script>
      let threddsbase = "{{ settings.threddsurl }}";
      let model = "{{ model }}";
      let app = "{{ app }}";
      let instance_id = "{{ instance_id }}"
  </script>
  <!-- Allows csrf verification with AJAX -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>

  <!-- script for leaflet -->
  <script type="text/javascript" src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
  <!-- Leadlet with Esri -->

  <script src="https://unpkg.com/esri-leaflet@2.2.3/dist/esri-leaflet.js"
          integrity="sha512-YZ6b5bXRVwipfqul5krehD9qlbJzc6KOGXYsDjU9HHXW2gK57xmWl2gU6nAegiErAqFXhygKIsWPKbjLPXVb2g=="
          crossorigin=""></script>
  <!-- script for timeseries controls in leaflet -->
  <script type="text/javascript"
          src="https://cdn.rawgit.com/socib/Leaflet.TimeDimension/master/dist/leaflet.timedimension.min.js"></script>
  <script type="text/javascript" src="https://cdn.rawgit.com/nezasa/iso8601-js-period/master/iso8601.min.js"></script>
  <!-- allows you to use the leaflet draw plugin -->
  <script type="text/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw-src.js"></script>

  <!-- script for using highcharts (display timeseries plot) -->
  <script type="text/javascript" src="https://code.highcharts.com/highcharts.js"></script>
  <script type="text/javascript" src="https://code.highcharts.com/highcharts-more.js"></script>
  <script type="text/javascript" src="https://code.highcharts.com/modules/exporting.js"></script>
  <script type="text/javascript" src="https://code.highcharts.com/modules/export-data.js"></script>
  <script type="text/javascript" src="https://code.highcharts.com/modules/no-data-to-display.js"></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-128273217-2"></script>
  <script>
      window.dataLayer = window.dataLayer || [];

      function gtag() {
          dataLayer.push(arguments);
      }

      gtag('js', new Date());
      gtag('config', 'UA-128273217-2');
  </script>

  <!-- scripts I wrote for the app, main should go last -->
  <script src="{% static 'gldas/js/gjson1.js' %}" type="text/javascript"></script>
  <script src="{% static 'gldas/js/gjson2.js' %}" type="text/javascript"></script>
  <script src="{% static 'gldas/js/gjson3.js' %}" type="text/javascript"></script>
  <script src="{% static 'gldas/js/bounds.js' %}" type="text/javascript"></script>

  <script src="{% static 'gldas/js/customShp.js' %}" type="text/javascript"></script>
  <script src="{% static 'gldas/js/highcharts.js' %}" type="text/javascript"></script>
  <script src="{% static 'gldas/js/leaflet.js' %}" type="text/javascript"></script>
  <script src="{% static 'gldas/js/main.js' %}" type="text/javascript"></script>
{% endblock %}